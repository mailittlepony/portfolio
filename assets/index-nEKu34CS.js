import{i as k,M as w,T as d,p as I}from"./vendor-Dz46q13P.js";import{r as C,g as D}from"./highlight-CAOHOvZ5.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(t){if(t.ep)return;t.ep=!0;const i=r(t);fetch(t.href,i)}})();var P=C();const U=D(P);function p(e,o,r){let n=o;for(;n<r&&k(e.charCodeAt(n));)n+=1;return n}function $(e){return/[A-Za-z0-9]/.test(e)}function N(e,o,r){let n=o;const t=e.slice(o,o+5);if(t!=="image"&&t!=="audio"&&t!=="video"||(n+=5,e.charAt(n)!=="/"))return null;n+=1;const i=n;for(;n<r&&$(e.charAt(n));)n+=1,/[-+.]/.test(e.charAt(n))&&(n+=1);if(n===i)return null;if(e.charAt(n)===";")for(n+=1;n<r&&e.charAt(n)!=="]";)n+=1;return{pos:n,value:e.slice(o,n)}}function b(e,o,r,n=w()){let t=o;if(e.slice(t,t+2)!=="![")return null;t=p(e,t+2,r);const i=N(e,t,r);if(!i||(t=p(e,i.pos,r),e.slice(t,t+2)!=="]("))return null;t=p(e,t+2,r);const s=n.helpers.parseLinkDestination(e,t,r);if(!s.ok)return null;const l=n.normalizeLink(s.str);return!n.validateLink(l)||(t=p(e,s.pos,r),t>=r||e.charAt(t)!==")")?null:{pos:t+1,res:{src:l,type:i.value}}}function S(e,o,r){let n=o;for(;n<r&&/\d/.test(e.charAt(n));)n+=1;return n===o?null:(e.charAt(n)==="%"&&(n+=1),{pos:n,value:e.slice(o,n)})}function _(e,o,r){let n=o;if(n>=r||e.charAt(n)!=="=")return null;n+=1;const t=S(e,n,r);let i="";if(t&&(n=t.pos,i=t.value),e.charAt(n)!=="x")return null;n+=1;const s=S(e,n,r);let l="";if(s)n=s.pos,l=s.value;else if(!t)return null;return{pos:n,res:{width:i,height:l}}}function B(e,o,r,n=w()){let t=o;if(e.slice(t,t+2)!=="#=")return null;t+=2;const i=n.helpers.parseLinkDestination(e,t,r);if(!i.ok)return null;const s=n.normalizeLink(i.str);return n.validateLink(s)?(t=i.pos,{pos:t,value:s}):null}function H(e,o,r){let n=o;for(;n<r&&$(e.charAt(n));)n+=1,e.charAt(n)==="-"&&(n+=1);return e.charAt(n-1)==="-"&&(n-=1),n===o?null:{pos:n,value:e.slice(o,n)}}function z(e,o,r,n=w()){let t=o;if(e.charAt(t)!=="[")return null;t=p(e,t+1,r);const i=H(e,t,r);if(!i||(t=p(e,i.pos,r),e.slice(t,t+2)!=="]("))return null;t=p(e,t+2,r);const s=n.helpers.parseLinkDestination(e,t,r);if(!s.ok)return null;const l=n.normalizeLink(s.str);if(!n.validateLink(l))return null;t=p(e,s.pos,r);const c=n.helpers.parseLinkTitle(e,t,r);let a=null;return c.ok&&(a=c.str,t=p(e,c.pos,r)),t>=r||e.charAt(t)!==")"?null:{pos:t+1,res:{src:l,srclang:i.value,label:a}}}function O(e,o){let r=o;const n={title:null,poster:null,width:null,height:null,sources:[],captions:[]};for(;r<e.posMax&&(r+=1,!!k(e.src.charCodeAt(r))););if(r>=e.posMax)return null;let t=b(e.src,r,e.posMax,e.md);if(!t){const s=e.md.helpers.parseLinkDestination(e.src,r,e.posMax);if(s.ok){const l=e.md.normalizeLink(s.str);if(!e.md.validateLink(l))return null;t={pos:s.pos,res:{src:l,type:null}}}}for(;t;)n.sources.push(t.res),r=p(e.src,t.pos,e.posMax),t=b(e.src,r,e.posMax,e.md);if(n.sources.length===0)return null;r=p(e.src,r,e.posMax);const i=e.md.helpers.parseLinkTitle(e.src,r,e.posMax);for(r<e.posMax&&i.ok&&(n.title=i.str,r=p(e.src,i.pos,e.posMax));r<e.posMax&&k(e.src.charCodeAt(r-1));){if(!n.width&&!n.height){const l=_(e.src,r,e.posMax);if(l){n.width=l.res.width,n.height=l.res.height,r=p(e.src,l.pos,e.posMax);continue}}if(!n.poster){const l=B(e.src,r,e.posMax,e.md);if(l){n.poster=l.value,r=p(e.src,l.pos,e.posMax);continue}}const s=z(e.src,r,e.posMax);if(s){n.captions.push(s.res),r=p(e.src,s.pos,e.posMax);continue}break}return{pos:r,res:n}}function q(e){if(e.src.charAt(e.pos)!=="!"||e.src.charAt(e.pos+1)!=="[")return null;const o=e.pos+2,r=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(r<0)return null;const n=e.src.slice(o,r);let t=r+1;if(t<e.posMax&&e.src.charAt(t)==="("){const u=O(e,t);return!u||(t=u.pos,t>=e.posMax||e.src.charAt(t)!==")")?null:(t+=1,{pos:t,res:{label:n,...u.res}})}const{env:i}=e;if(!i||typeof i!="object"||!("references"in i))return null;let s=n;if(t=p(e.src,t,e.posMax),t<e.posMax&&e.src.charAt(t)==="["){const u=t+1;t=e.md.helpers.parseLinkLabel(e,t),t>=0?(s=e.src.slice(u,t),t+=1):t=r+1}else t=r+1;s||(s=e.src.slice(o,r));const{references:l}=i;if(!l||typeof l!="object")return null;const c=e.md.utils.normalizeReference(s),a=l[c];if(!a||typeof a!="object")return null;const f={label:n,sources:[],title:null,poster:null,width:null,height:null,captions:[]};if("href"in a&&typeof a.href=="string")f.sources=[{src:a.href,type:null}];else if("sources"in a&&Array.isArray(a.sources))f.sources=a.sources;else return null;return"title"in a&&typeof a.title=="string"&&(f.title=a.title),"poster"in a&&typeof a.poster=="string"&&(f.poster=a.poster),"width"in a&&typeof a.width=="string"&&(f.width=a.width),"height"in a&&typeof a.height=="string"&&(f.height=a.height),"captions"in a&&Array.isArray(a.captions)&&(f.captions=a.captions),{pos:t,res:f}}const W=new Map([["bmp","image"],["gif","image"],["jpg","image"],["jpeg","image"],["png","image"],["svg","image"],["tif","image"],["tiff","image"],["webp","image"],["avi","video"],["m4v","video"],["mkv","video"],["mov","video"],["mpg","video"],["mp4","video"],["ogv","video"],["webm","video"],["wmv","video"],["aac","audio"],["flac","audio"],["m4a","audio"],["mp3","audio"],["oga","audio"],["ogg","audio"],["wav","audio"]]);function F(e){for(const o of e)if(o.type){const[r]=o.type.split("/");if(r&&(r==="image"||r==="audio"||r==="video"))return r}for(const{src:o}of e){const{pathname:r}=new URL(o,"http://unused.invalid"),n=r.split(".").at(-1)?.toLowerCase()??"",t=W.get(n);if(t)return t}return null}function v(e){const o=new d("text","",0);return o.content=e,o}function G(e,o,r={}){e.attrSet("src",o.sources[0].src),e.attrSet("alt",""),o.title&&e.attrSet("title",o.title),o.width&&e.attrSet("width",o.width),o.height&&e.attrSet("height",o.height);for(const[n,t]of Object.entries(r))e.attrSet(n,t)}function J(e,o,r={}){o.title&&e.attrSet("title",o.title),e.tag!=="audio"&&(o.width&&e.attrSet("width",o.width),o.height&&e.attrSet("height",o.height),o.poster&&e.attrSet("poster",o.poster));for(const[n,t]of Object.entries(r))e.attrSet(n,t)}function K(e,o,r){const n=[];let t;const i=F(o.sources);if(!i||i==="image")return t=e.push("image","img",0),e.md.inline.parse(o.label,e.md,e.env,n),t.children=n,G(t,o,r?.attrs?.image),t;let s=i;s==="audio"&&(o.poster||o.captions.length>0)&&(s="video"),t=e.push(i,s,0);for(const{src:l,type:c}of o.sources){const a=new d("source","source",0);a.attrSet("src",l),c&&a.attrSet("type",c),n.push(a)}for(const l of o.captions){const c=new d("track","track",0);c.attrSet("src",l.src),c.attrSet("srclang",l.srclang),l.label&&c.attrSet("label",l.label),c.attrSet("kind","captions"),n.push(c)}e.md.inline.parse(o.label,e.md,e.env,n);for(const{src:l,type:c}of o.sources){n.push(v(" "));const a=new d("link_open","a",1);a.attrSet("href",l),n.push(a);let f=null;if(c){const u=c.match(/^[a-z]+\/(.+)(?:;.*)*/);u&&u[1]&&(f=`${u[1]} `)}n.push(v(`Download ${f??""}${i}`)),n.push(new d("link_close","a",-1))}return n.push(v(".")),t.children=n,r?.controls&&t.attrSet("controls",""),J(t,o,r?.attrs?.[i]),t}function V(e){return function(r,n){const{pos:t,posMax:i}=r,s=q(r);return s?(r.pos=s.pos,n||K(r,s.res,e),!0):(r.pos=t,r.posMax=i,!1)}}function x(e,o,r,n,t){const i=e[o],s=t.renderAttrs(i),l=`<${i.tag}${s}>`,c=`</${i.tag}>`;let a="";return i.children&&(a=t.renderInline(i.children,r,n)),`${l}${a}${c}`}function X(e,o){e.inline.ruler.before("image","media",V(o)),e.inline.ruler.disable("image"),e.renderer.rules.audio=x,e.renderer.rules.video=x}const M=new w({html:!0,linkify:!0,breaks:!0}).use(U,{inline:!0}).use(X,{controls:!0,attrs:{image:{},audio:{controls:"",preload:"metadata"},video:{controls:"",autoplay:"",loop:"",muted:"",playsinline:"",preload:"metadata",style:"max-width:100%;height:auto;"}}}),Y=M.renderer.rules.link_open??((e,o,r,n,t)=>t.renderToken(e,o,r));M.renderer.rules.link_open=(e,o,r,n,t)=>{const i=e[o].attrIndex("target");i<0?e[o].attrPush(["target","_blank"]):e[o].attrs[i][1]="_blank";const s=e[o].attrIndex("rel");return s<0?e[o].attrPush(["rel","noopener noreferrer"]):e[o].attrs[s][1]="noopener noreferrer",Y(e,o,r,n,t)};function Z(e=""){const o=M.render(e);return I.sanitize(o,{ADD_TAGS:["video","audio","source"],ADD_ATTR:["controls","autoplay","loop","muted","playsinline","preload","poster","src","type","style","width","height","aria-label"]})}function Q(e,o=""){e&&(e.innerHTML=Z(o))}async function h(e){const o=await fetch(e,{credentials:"omit",cache:"no-store",redirect:"follow",mode:"cors"});if(!o.ok)throw new Error(`Failed to fetch ${e}: ${o.status} ${o.statusText}`);const r=await o.text(),n=r.slice(0,200).toLowerCase().replace(/\s+/g,"");if(n.startsWith("<!doctypehtml")||n.startsWith("<html"))throw new Error(`Expected markdown, got HTML document from ${e}. This usually means the URL is wrong or was rewritten to your index.html.`);const t=document.getElementById("content");return Q(t,r),r}async function ee(){const o=new URLSearchParams(window.location.search).get("name");if(console.log("[project] repoName =",o),!o){document.getElementById("content").innerHTML="<p>Missing <code>?name=</code> in URL.</p>";return}const r="mailittlepony",n="/portfolio/",t=n.startsWith("http")?n:window.location.origin+n,i=document.getElementById("content");try{console.log("[project] try local:",`markdown/${o}.md`),await h(`markdown/${o}.md`),E("#content",t);return}catch(s){console.warn("[project] local markdown missing → fallback to GitHub README:",s)}for(const s of["main","master"]){const l=`https://raw.githubusercontent.com/${r}/${encodeURIComponent(o)}/${s}/`,c=`${l}README.md`;console.log("[project] try GitHub:",c);try{await h(c),E("#content",l);return}catch(a){console.warn(`[project] README not found on ${s}:`,a)}}i.innerHTML=`<p>Could not load README for <code>${o}</code>. Check repository name/case or branch.</p>`}function E(e,o){const r=document.querySelector(e);r&&r.querySelectorAll("img, a, video, source").forEach(n=>{for(const t of["src","href"]){const i=n.getAttribute(t);if(!(!i||/^https?:\/\//i.test(i)))try{n.setAttribute(t,new URL(i,o).toString())}catch{}}})}async function te(){const e=await h("markdown/home.md");ne(e);const o=document.getElementById("content").querySelectorAll("p");for(const r of o){const n=r.querySelectorAll("img");if(n.length>=2){r.classList.add("selected-project");for(const t of n){const i=t.alt.trim(),s=document.createElement("a");s.href=`?name=${encodeURIComponent(i)}`;const l=document.createElement("div");l.classList.add("title"),s.style.position="relative";const c=document.createElement("h2");c.textContent=i,l.appendChild(c),r.appendChild(s),s.appendChild(t),s.appendChild(l)}break}}}function ne(e){const o=/## Other projects([\s\S]*?)(##|$)/,r=/\*\*\[(.+?)\]\((.+?)\)\*\*\s+_([^_]+)_\s+-\s+\*\*Technologies\*\*: ([^\n]+)\s+-\s+\*\*License\*\*: ([^\n]+)\s+-\s+\*\*Last Updated\*\*: ([^\n]+)\s*(?:-\s+\*\*Image\*\*: ([^\n]+))?/g,n=e.match(o);if(!n){console.error("Projects section not found");return}const t=[];r.lastIndex=0;let i;for(;(i=r.exec(n[1]))!==null;)t.push({title:i[1].trim(),url:i[2].trim(),description:i[3].trim(),technologies:i[4].split(",").map(u=>u.trim()),license:i[5].trim(),lastUpdated:i[6].trim(),imageUrl:i[7]?.trim()||""});if(!t.length){console.error("No projects parsed");return}const s=document.getElementById("content"),l=Array.from(s.querySelectorAll("h2")).find(u=>u.textContent.trim().toLowerCase()==="other projects");if(!l){console.error("Projects section header not found in rendered HTML");return}let c=l.nextElementSibling;for(;c&&c.tagName!=="H2";){const u=c.nextElementSibling;c.remove(),c=u}const a={JavaScript:"yellow",Python:"steelBlue","C#":"green","C++":"deepPink",GLSL:"skyBlue"},f=l.nextElementSibling;t.forEach(u=>{const T=u.title,A=u.technologies[0]||"",R=a[A]||"#586069",y=document.createElement("div");y.classList.add("project-card"),y.innerHTML=`
<div class="project-text">
    <div class="project-header">
        <a href="?name=${encodeURIComponent(T)}" class="project-title">${u.title}</a>
    </div>
    <p class="project-description">${u.description}</p>
    <ul class="project-tags">
        ${u.technologies.map(j=>`<li>${j}</li>`).join("")}
    </ul>
    <div class="project-meta">
        <span class="language">
            <span class="language-dot" style="background-color: ${R};"></span> ${A}
        </span>
        <span>${u.license}</span>
        <span>Updated ${u.lastUpdated}</span>
    </div>
</div>
${u.imageUrl?`<img src="${u.imageUrl}" alt="${u.title} image" class="project-image" />`:""}
`,s.insertBefore(y,f)})}const re=new Set(["contact","home"]);function m(e,o){const r=document.getElementById("readme-link"),n=document.getElementById("contact-link");r?.classList.remove("active"),n?.classList.remove("active"),!o&&((!e||e==="home")&&r?.classList.add("active"),e==="contact"&&n?.classList.add("active"))}function g(){const e=document.getElementById("page");e&&e.scrollTo({top:0,left:0,behavior:"auto"}),window.scrollTo({top:0,left:0,behavior:"auto"})}async function L(){const e=new URLSearchParams(window.location.search),o=e.get("name"),r=(e.get("view")||"").toLowerCase();if(o){m("",!0),await ee(),g();return}if(r&&re.has(r)){m(r,!1),await h(`markdown/${r}.md`),g();return}if(r)try{m(r,!1),await h(`markdown/${r}.md`),g();return}catch(n){console.warn(`[router] markdown/${r}.md not found → home`,n)}m("home",!1),await te(),g()}function oe(){document.addEventListener("click",e=>{const o=e.target.closest?.("a");if(!o)return;const r=new URL(o.href,window.location.href);!(r.origin===window.location.origin&&r.pathname===window.location.pathname)||!(r.searchParams.has("name")||r.searchParams.has("view")||r.search===""||r.search==="?")||(e.preventDefault(),history.pushState(null,"",r),L())}),window.addEventListener("popstate",L)}document.addEventListener("DOMContentLoaded",()=>{oe(),L()});
